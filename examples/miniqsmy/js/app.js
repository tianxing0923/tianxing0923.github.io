var Enemy=cc.Sprite.extend({zOrder:10,active:!0,isLive:!0,direction:1,attackAction:null,dieAction:null,speed:5,speedY:0,speedFly:15,showSpace:0,hasFired:!1,hp:1,power:1,score:10,ctor:function(){this._super(),this.y=CENTER_POS.y-100},update:function(){this.active&&(this.x>-85&&-1==this.direction||this.x<WIN_SIZE.width+85&&1==this.direction?(this.x+=this.speed,this.y+=this.speedY):this.destroy())},toRun:function(){this.attackAction=cc.RepeatForever.create(cc.Animate.create(cc.animationCache.getAnimation("enemy"))),this.stopAllActions(),this.runAction(this.attackAction)},beHurt:function(){this.hp-=1,this.hp<=0?this.kill():this.x-=.2*WIN_SIZE.width*this.direction},kill:function(){this.isLive=!1,this.stopAllActions(),this.dieAction=cc.Animate.create(cc.animationCache.getAnimation("enemyDie")),this.rotateAction=cc.RepeatForever.create(cc.RotateBy.create(.2,360)),this.runAction(this.dieAction),this.runAction(this.rotateAction),this.speedY=10*Math.random()+5,this.x>WIN_SIZE.width/2?(this.direction=1,this.speed=this.speedFly):(this.direction=-1,this.speed=-this.speedFly)},destroy:function(){this.speedY=0,this.active=this.visible=!1,this.attackAction=this.dieAction=null,QSMY.activeEnemy--,this.stopAllActions()},getAttackRect:function(){return cc.rect(this.x,0,100,0)},toActive:function(t,e){this.active=this.visible=!0,this.direction=t,this.y=CENTER_POS.y-100,this.speedY=0,this.hp=1,1==this.direction?(this.speed=e,this.x=0,this.scaleX=1):(this.speed=-e,this.x=WIN_SIZE.width,this.scaleX=-1),this.toRun()}});Enemy.addNewEnemy=function(t){var e=Math.random()>.5?1:-1;Enemy.create().toActive(e,t),QSMY.activeEnemy++},Enemy.create=function(){var t=new Enemy;return g_gameLayer.addEnemy(t,t.zOrder),QSMY.enemies.push(t),t};var Hero=cc.Sprite.extend({zOrder:30,direction:1,hurtAction:null,poseAction:null,attackActionList:[],ctor:function(){this._super(),this.init(),this.toPose()},init:function(){this.x=CENTER_POS.x,this.y=CENTER_POS.y-80,this.poseAction=cc.RepeatForever.create(cc.Animate.create(cc.animationCache.getAnimation("heroPose"))),this.poseAction.retain(),this.attackActionList=[];var t=cc.Sequence.create(cc.Animate.create(cc.animationCache.getAnimation("heroCut")),cc.CallFunc.create(this.toPose,this));t.retain(),this.attackActionList.push(t),t=cc.Sequence.create(cc.Animate.create(cc.animationCache.getAnimation("heroStab")),cc.CallFunc.create(this.toPose,this)),t.retain(),this.attackActionList.push(t),t=cc.Sequence.create(cc.Animate.create(cc.animationCache.getAnimation("heroKick")),cc.CallFunc.create(this.toPose,this)),t.retain(),this.attackActionList.push(t),this.hurtAction=cc.Sequence.create(cc.Animate.create(cc.animationCache.getAnimation("heroHurt")),cc.CallFunc.create(this.toPose,this)),this.hurtAction.retain()},setDirection:function(t){this.scaleX=this.direction=t},resetPos:function(){this.x=CENTER_POS.x,this.y=CENTER_POS.y-80},toPose:function(){this.stopAllActions(),this.runAction(this.poseAction),this.resetPos()},beHurt:function(t){1==t?this.setDirection(-1):this.setDirection(1),this.stopAllActions(),this.resetPos(),this.runAction(this.hurtAction)},toAttact:function(t){this.stopAllActions();var e=Math.floor(3*Math.random());0===e?(this.y=CENTER_POS.y-94,1==t?this.x=CENTER_POS.x+80:this.x=CENTER_POS.x-80):1===e?(this.y=CENTER_POS.y-89,1==t?this.x=CENTER_POS.x+95:this.x=CENTER_POS.x-95):2===e&&(this.y=CENTER_POS.y-82,1==t?this.x=CENTER_POS.x+50:this.x=CENTER_POS.x-50),this.runAction(this.attackActionList[e])},destroy:function(){this.visible=!1,this.attackActionList=[],this.stopAllActions()},getAttackRect:function(){return cc.rect(this.x,0,200,0)},getCollideRect:function(t,e){return cc.rect(this.x,0,168,0)}}),Hits=cc.Sprite.extend({lblCount:null,ctor:function(){this._super(),this.init()},init:function(){this._super();var t=cc.Sprite.create("#hits.png");this.addChild(t),this.lblCount=cc.LabelTTF.create("0","",72),this.lblCount.color=cc.color(255,252,0),this.lblCount.anchorX=1,this.lblCount.x=0,this.lblCount.y=10,this.addChild(this.lblCount),this.x=CENTER_POS.x,this.actionMove=cc.MoveTo.create(.3,cc.p(this.x,CENTER_POS.y+200)),this.fade=cc.FadeOut.create(.3),this.destroy()},play:function(){this.visible=!0,this.stopAllActions(),this.y=CENTER_POS.y+100,this.runAction(cc.Sequence.create(this.fade,cc.CallFunc.create(this.destroy,this))),this.runAction(this.actionMove)},setNum:function(t){this.lblCount.setString(t+""),this.play()},destroy:function(){this.visible=!1}}),Light=cc.Sprite.extend({zOrder:20,active:!1,ctor:function(){this._super()},play:function(){this.visible=!0,this.runAction(cc.Sequence.create(cc.Animate.create(cc.animationCache.getAnimation("effect")),cc.CallFunc.create(this.destroy,this)))},destroy:function(){this.active=this.visible=!1}});Light.addNew=function(t,e){Light.getOrCreate(t,e).play()},Light.getOrCreate=function(t,e){for(var i=null,n=0,c=QSMY.blood.length;c>n;n++)if(i=QSMY.blood[n],i.active===!1)return i.x=t,i.y=e,i;return i=Light.create(),i.x=t,i.y=e,i},Light.create=function(){var t=new Light;return g_gameLayer.addBlood(t,t.zOrder),QSMY.blood.push(t),t};var LoaderLayer=cc.Layer.extend({ctor:function(){this._super(),this.initBg(),this.initProgress(),this.initLogo()},initBg:function(){var t=cc.Sprite.create(cc._loaderImage);t.x=CENTER_POS.x,t.y=CENTER_POS.y,this.addChild(t)},initProgress:function(){var t=cc.Sprite.create(cc._loadingImage);t.x=CENTER_POS.x,t.y=CENTER_POS.y,this.addChild(t)},initLogo:function(){var t=cc.Sprite.create(logoData);t.x=CENTER_POS.x,t.y=70,this.addChild(t)}}),LoaderScene=cc.Scene.extend({loaderLayer:null,lblPercent:null,callback:null,target:null,ctor:function(){this._super(),this.loaderLayer=new LoaderLayer,this.addChild(this.loaderLayer),this.progress=cc.Sprite.create(cc._fpsImage),this.progress.anchorX=this.progress.anchorY=0,this.progress.x=(WIN_SIZE.width-472)/2,this.progress.y=CENTER_POS.y-6.5,this.loaderLayer.addChild(this.progress),this.progress.setTextureRect(cc.rect(0,0,0,13)),this.lblPercent=cc.LabelTTF.create("Loading... 0%","",32),this.lblPercent.x=CENTER_POS.x,this.lblPercent.y=CENTER_POS.y-100,this.lblPercent.color=cc.color(255,255,255),this.loaderLayer.addChild(this.lblPercent)},onEnter:function(){var t=this;cc.Node.prototype.onEnter.call(t),t.schedule(t._startLoading,.3)},onExit:function(){cc.Node.prototype.onExit.call(this);var t="Loading... 0%";this.lblPercent.setString(t)},initWithResources:function(t,e,i){cc.isString(t)&&(t=[t]),this.resources=t||[],this.callback=e,this.target=i},_startLoading:function(){var t=this;t.unschedule(t._startLoading),cc.loader.load(t.resources,function(e,i,n){var c=n/i*100|0;c=Math.min(c,100),t.lblPercent.setString("Loading... "+c+"%"),t.progress.setTextureRect(cc.rect(0,0,472*c/100,13))},function(){t.callback&&t.callback.call(t.target)})}});LoaderScene.preload=function(t,e,i){var n=new LoaderScene;return n.initWithResources(t,e,i),cc.director.runScene(n),n};var StartLayer=cc.Layer.extend({btnStart:null,ctor:function(){this._super();var t=cc.Sprite.create(res.rules);t.x=CENTER_POS.x,t.y=CENTER_POS.y+120,this.addChild(t),this.btnStart=cc.Sprite.create("#btn_start.png"),this.btnStart.x=CENTER_POS.x,this.btnStart.y=t.y-342.5-120,this.addChild(this.btnStart);var e=cc.Sprite.create(logoData);e.x=CENTER_POS.x,e.y=70,this.addChild(e),this.initEvent()},initEvent:function(){var t=this,e=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e,i){var n=i.getCurrentTarget(),c=n.convertToNodeSpace(e.getLocation()),s=n.getContentSize(),a=cc.rect(0,0,s.width,s.height);return cc.rectContainsPoint(a,c)?(t.btnStart.y-=2,t.btnStart.color=cc.color(150,150,150,150),setTimeout(function(){cc.director.runScene(cc.TransitionFade.create(.3,new GameScene,cc.color(36,36,36)))},20),!0):!1},onTouchEnded:function(t,e){var i=e.getCurrentTarget();i.y+=2}});cc.eventManager.addListener(e,t.btnStart)}}),StartScene=cc.Scene.extend({onEnter:function(){this._super();var t=new StartLayer;this.addChild(t)}}),GameLayer=cc.Layer.extend({bg:null,heroInstance:null,enemyInstance:null,scoreInstance:null,hitsInstance:null,second:60,secondLabel:0,hp:0,hpBar:null,btnLeft:null,btnRight:null,status:1,hitCount:0,interval:40,locktime:3,isShaking:!1,ctor:function(){this._super(),this.second=QSMY.second,this.status=QSMY.playing,QSMY.enemies=[],QSMY.blood=[],QSMY.score=0,QSMY.activeEnemy=0,g_gameLayer=this,this.initBg(),this.initAnimationCache(),this.initRoles(),this.initHp(),this.initData(),this.initBtnControl(),this.initLogo(),this.status=QSMY.playing,this.schedule(this.timer,.1),this.scheduleUpdate()},initBg:function(){this.bg=cc.Sprite.create(res.bg),this.bg.anchorY=1,this.bg.x=CENTER_POS.x,this.bg.y=WIN_SIZE.height,this.bg.baseX=this.bg.x,this.bg.baseY=this.bg.y,this.addChild(this.bg)},initAnimationCache:function(){var t,e=[];for(t=1;8>t;t++)e.push(cc.spriteFrameCache.getSpriteFrame("heroA0"+t+".png"));cc.animationCache.addAnimation(cc.Animation.create(e,.06),"heroPose");var i=[],n=[],c=[];for(t=1;5>t;t++)i.push(cc.spriteFrameCache.getSpriteFrame("heroB0"+t+".png")),n.push(cc.spriteFrameCache.getSpriteFrame("heroC0"+t+".png")),c.push(cc.spriteFrameCache.getSpriteFrame("heroD0"+t+".png"));cc.animationCache.addAnimation(cc.Animation.create(i,.04),"heroCut"),cc.animationCache.addAnimation(cc.Animation.create(n,.04),"heroStab"),cc.animationCache.addAnimation(cc.Animation.create(c,.04),"heroKick");var s=[];for(t=1;9>t;t++)s.push(cc.spriteFrameCache.getSpriteFrame("heroE0"+t+".png"));cc.animationCache.addAnimation(cc.Animation.create(s,.06),"heroHurt");var a=[];for(t=1;8>t;t++)a.push(cc.spriteFrameCache.getSpriteFrame("enemyA0"+t+".png"));cc.animationCache.addAnimation(cc.Animation.create(a,.06),"enemy"),cc.animationCache.addAnimation(cc.Animation.create([cc.spriteFrameCache.getSpriteFrame("enemyB01.png")],.04),"enemyDie");var r=[];for(t=1;3>t;t++)r.push(cc.spriteFrameCache.getSpriteFrame("effectA0"+t+".png"));cc.animationCache.addAnimation(cc.Animation.create(r,.04),"effect")},initRoles:function(){var t=cc.textureCache.addImage(res.roles);this.heroInstance=new Hero,this.addChild(this.heroInstance),this.enemyInstance=cc.SpriteBatchNode.create(t),this.enemyInstance.setBlendFunc(cc.SRC_ALPHA,cc.ONE),this.addChild(this.enemyInstance)},initHp:function(){this.hp=QSMY.hp,this.second=this.secondLabel=QSMY.second;var t=cc.LabelTTF.create("HP","",32);t.x=CENTER_POS.x-169-40,t.y=WIN_SIZE.height-200,this.addChild(t);var e=cc.Sprite.create("#hp_bg.png");e.anchorX=e.anchorY=0,e.x=CENTER_POS.x-169,e.y=WIN_SIZE.height-210,this.addChild(e),this.hpBar=cc.Sprite.create(res.hp_bar),this.hpBar.anchorX=this.hpBar.anchorY=0,this.hpBar.x=e.x,this.hpBar.y=e.y,this.addChild(this.hpBar)},initData:function(){this.scoreInstance=new ScoreLayer,this.addChild(this.scoreInstance),this.hitsInstance=new Hits,this.enemyInstance.addChild(this.hitsInstance)},initBtnControl:function(){this.btnLeft=cc.Sprite.create("#btn_attack.png"),this.btnRight=cc.Sprite.create("#btn_attack.png"),this.btnLeft.x=.3*WIN_SIZE.width,this.btnLeft.y=this.btnRight.y=.2*WIN_SIZE.height,this.btnRight.scaleX=-1,this.btnRight.x=.7*WIN_SIZE.width,this.addChild(this.btnLeft),this.addChild(this.btnRight);var t=this,e=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:function(e,i){var n=i.getCurrentTarget(),c=n.convertToNodeSpace(e.getLocation()),s=n.getContentSize(),a=cc.rect(0,0,s.width,s.height);return cc.rectContainsPoint(a,c)?(n.y-=2,n==t.btnLeft?t.status==QSMY.playing&&(t.heroInstance.setDirection(-1),t.attackEnemy(-1)):n==t.btnRight&&t.status==QSMY.playing&&(t.heroInstance.setDirection(1),t.attackEnemy(1)),!0):!1},onTouchEnded:function(t,e){var i=e.getCurrentTarget();i.y+=2}});cc.eventManager.addListener(e,this.btnLeft),cc.eventManager.addListener(e.clone(),this.btnRight)},initLogo:function(){var t=cc.Sprite.create(logoData);t.x=CENTER_POS.x,t.y=70,this.addChild(t)},addEnemy:function(t,e){this.enemyInstance.addChild(t,e)},addBlood:function(t,e){this.enemyInstance.addChild(t,e)},attackEnemy:function(t){for(var e=this.heroInstance.getAttackRect(),i=0,n=!1,c=0,s=QSMY.enemies.length;s>c;c++){var a=QSMY.enemies[c];a.active&&a.isLive&&(a.x-CENTER_POS.x<e.width&&1==t&&a.x>CENTER_POS.x||CENTER_POS.x-a.x<e.width&&-1==t&&a.x<CENTER_POS.x)&&(n=!0,a.beHurt(),Light.addNew(a.x,a.y),0===a.hp&&i++)}n&&(this.hitCount+=1,this.hitCount>QSMY.hits&&(QSMY.hits=this.hitCount),this.hitsInstance.setNum(this.hitCount),this.shakeAction(),i>0&&this.scoreInstance.setNum(i)),this.heroInstance.toAttact(t)},setHp:function(t){if(this.hp-=t,this.hp<=0){this.hp=0;var e=this;setTimeout(function(){e.onGameOver()},100)}var i=Math.floor(100*this.hp/QSMY.hp),n=338*i/100;this.hpBar.setTextureRect(cc.rect(0,0,n,21))},timer:function(){if(this.status==QSMY.playing)if(this.secondLabel>0){this.secondLabel-=.1,this.second=Math.floor(this.secondLabel),this.secondLabel=Math.floor(10*this.secondLabel)/10;var t=this.secondLabel;this.secondLabel-this.second===0&&(t+=".0"),QSMY.useSecond=QSMY.second-parseFloat(this.secondLabel),QSMY.useSecond=QSMY.useSecond<0?0:QSMY.useSecond,QSMY.useSecond=Math.floor(10*QSMY.useSecond)/10,this.scoreInstance.setTimeNum(t)}else this.onGameOver()},update:function(){this.status==QSMY.playing&&(this.checkIsCollide(),this.updateUI())},checkIsCollide:function(){for(var t,e,i=0,n=QSMY.enemies.length;n>i;i++)t=QSMY.enemies[i],t.active&&(t.update(),t.isLive&&!t.hasFired&&(e=t.getAttackRect(),(1==t.direction&&e.width+e.x>CENTER_POS.x||-1==t.direction&&e.x-e.width<CENTER_POS.x)&&(t.hasFired=!0,this.hitCount=0,this.setHp(t.power),this.heroInstance.beHurt(t.direction))))},updateUI:function(){if(this.updateShake(),this.status==QSMY.playing)if(this.interval<=0){var t;this.second<10?(this.interval=10,t=12):this.second<20?(this.interval=18,t=10):this.second<30?(this.interval=22,t=9):this.second<40?(this.interval=28,t=8):this.second<50?(this.interval=35,t=7):(this.interval=40,t=5),Enemy.addNewEnemy(t)}else this.interval--},shakeAction:function(){this.isShaking=!0,this.bg.rangeX=20,this.bg.rangeY=20,this.bg.x=this.bg.baseX-this.bg.rangeX/2+this.bg.rangeX*Math.random(),this.bg.y=this.bg.baseY-this.bg.rangeY+2*this.bg.rangeY*Math.random(),this.bg.shakeTimeCount=0,this.bg.cframe=0},updateShake:function(){this.isShaking&&(this.bg.cframe+=1,this.bg.cframe>=2&&(this.bg.cframe=0,5==this.bg.shakeTimeCount?this.cancelShake():(this.bg.shakeTimeCount++,this.bg.x+=1.7*(this.bg.baseX-this.bg.x),this.bg.y+=1.7*(this.bg.baseY-this.bg.y))))},cancelShake:function(){this.isShaking=!1,this.bg&&(this.bg.x=this.bg.baseX,this.bg.y=this.bg.baseY)},clearEmeny:function(){for(var t,e=0,i=QSMY.enemies.length;i>e;e++)t=QSMY.enemies[e],t&&this.enemyInstance.removeChild(t);QSMY.enemies=[]},onGameOver:function(){this.status=QSMY.gameover,this.unschedule(this.timer,.1),this.clearEmeny(),this.enemyInstance.removeAllChildren(),this.heroInstance=null,this.enemyInstance=null,this.scoreInstance=null,this.hitsInstance=null,cc.eventManager.removeAllListeners(),cc.director.runScene(cc.TransitionFade.create(.6,new GameOverScene,cc.color(36,36,36)))},reStart:function(){this.init()}}),GameScene=cc.Scene.extend({onEnter:function(){this._super();var t=new GameLayer;this.addChild(t)}}),GameOverLayer=cc.Layer.extend({bg:null,lblScore:null,btnShare:null,btnAgain:null,btnAttention:null,ctor:function(){this._super(),this.initBg(),this.initBtn();var t=cc.Sprite.create(logoData);t.x=CENTER_POS.x,t.y=70,this.addChild(t)},initBg:function(){var t=new RayLayer;this.addChild(t),this.bg=cc.Sprite.create(res.gameover),this.bg.x=CENTER_POS.x,this.bg.y=CENTER_POS.y+210,this.addChild(this.bg),this.lblScore=cc.LabelTTF.create(QSMY.score+"","",120),this.lblScore.color=cc.color(252,255,0),this.lblScore.x=CENTER_POS.x,this.lblScore.y=this.bg.y+5,this.lblScore._setFontWeight(700),this.addChild(this.lblScore)},initBtn:function(){this.btnAgain=cc.Sprite.create("#btn_again.png"),this.btnShare=cc.Sprite.create("#btn_share.png"),this.btnAttention=cc.Sprite.create("#btn_attention.png"),this.btnAgain.x=this.bg.x-150,this.btnAgain.y=this.bg.y-440,this.btnShare.x=this.bg.x+150,this.btnShare.y=this.bg.y-440,this.btnAttention.x=this.bg.x,this.btnAttention.y=this.bg.y-440-121,this.addChild(this.btnShare),this.addChild(this.btnAgain),this.addChild(this.btnAttention),this.initEvent()},initEvent:function(){var t=this,e=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:function(e,i){var n=i.getCurrentTarget(),c=n.convertToNodeSpace(e.getLocation()),s=n.getContentSize(),a=cc.rect(0,0,s.width,s.height);return cc.rectContainsPoint(a,c)?(n.y-=2,n==t.btnShare?t.onShare():n==t.btnAgain?t.onAgain():n==t.btnAttention&&t.onAttention(),!0):!1},onTouchEnded:function(t,e){var i=e.getCurrentTarget();i.y+=2}});cc.eventManager.addListener(e,this.btnShare),cc.eventManager.addListener(e.clone(),this.btnAgain),cc.eventManager.addListener(e.clone(),this.btnAttention)},onAgain:function(){cc.director.runScene(cc.TransitionFade.create(.3,new StartScene,cc.color(36,36,36)))},onAttention:function(){var t=document.getElementById("qrcode");t.className="qrcode show"},onShare:function(){cc.eventManager.removeAllListeners(),cc.director.runScene(cc.TransitionFade.create(.3,new ShareScene,cc.color(36,36,36)))}}),GameOverScene=cc.Scene.extend({onEnter:function(){this._super();var t=new GameOverLayer;this.addChild(t)}}),ShareLayer=cc.Layer.extend({ctor:function(){this._super(),this.initBg(),this.initBtn();var t=cc.Sprite.create(logoData);t.x=CENTER_POS.x,t.y=70,this.addChild(t)},initBg:function(){var t=cc.Sprite.create(res.bg_share);t.anchorY=1,t.x=CENTER_POS.x,t.y=WIN_SIZE.height,this.addChild(t)},initBtn:function(){var t=cc.Sprite.create("#btn_back.png");t.x=CENTER_POS.x,t.y=350,this.addChild(t);var e=this,i=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:function(t,e){var i=e.getCurrentTarget(),n=i.convertToNodeSpace(t.getLocation()),c=i.getContentSize(),s=cc.rect(0,0,c.width,c.height);return cc.rectContainsPoint(s,n)?(i.y-=2,!0):!1},onTouchEnded:function(t,i){e.onReturn();var n=i.getCurrentTarget();n.y+=2}});cc.eventManager.addListener(i,t)},onReturn:function(){cc.eventManager.removeAllListeners(),cc.director.runScene(cc.TransitionFade.create(.3,new GameOverScene,cc.color(36,36,36)))}}),ShareScene=cc.Scene.extend({onEnter:function(){this._super();var t=new ShareLayer;this.addChild(t)}}),ScoreLayer=cc.Layer.extend({timeLabel:null,scoreLabel:null,time:null,timeAction:null,ctor:function(){this._super(),this.timeLabel=cc.LabelTTF.create("","",42),this.timeLabel.x=WIN_SIZE.width-130,this.timeLabel.y=WIN_SIZE.height-90,this.addChild(this.timeLabel),this.scoreLabel=cc.LabelTTF.create("0","",100),this.scoreLabel.color=cc.color(255,252,0,1),this.scoreLabel.x=CENTER_POS.x,this.scoreLabel.y=WIN_SIZE.height-94,this.scoreLabel._setFontWeight(700),this.addChild(this.scoreLabel);var t=cc.ScaleBy.create(.1,1.5);this.timeAction=cc.Sequence.create(t,t.reverse())},setNum:function(t){QSMY.score+=10*t,this.scoreLabel.runAction(this.timeAction),this.scoreLabel.setString(QSMY.score+"")},setTimeNum:function(t){parseFloat(t)<10&&(this.timeLabel.color=cc.color(255,0,0,0)),this.timeLabel.setString(t+'"')}}),RayLayer=cc.Layer.extend({ctor:function(){this._super();var t=cc.Sprite.create(res.ray);t.x=CENTER_POS.x,t.y=CENTER_POS.y+210,this.addChild(t);var e=cc.RepeatForever.create(cc.RotateBy.create(10,360));t.runAction(e)}}),res={bg:"res/bg.jpg",rules:"res/rules.png",roles:"res/roles.png",roles_plist:"res/roles.plist",sprite:"res/sprite.png",sprite_plist:"res/sprite.plist",hp_bar:"res/hp_bar.png",gameover:"res/gameover.png",bg_share:"res/bg_share.jpg",ray:"res/ray.png"},g_resources=[res.bg,res.rules,res.roles,res.roles_plist,res.sprite,res.sprite_plist,res.hp_bar,res.gameover,res.bg_share,res.ray],logoData="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAAiCAYAAACQhM1+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpENjI4NjlFMThFMDBFNjExODMzNEYyNEIzNkUyOTY4MSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFRkQ5RDAwQTAwOEUxMUU2QjMyOERDMTgwMjNGRjg0MyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFRkQ5RDAwOTAwOEUxMUU2QjMyOERDMTgwMjNGRjg0MyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ2Mjg2OUUxOEUwMEU2MTE4MzM0RjI0QjM2RTI5NjgxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ2Mjg2OUUxOEUwMEU2MTE4MzM0RjI0QjM2RTI5NjgxIi8+IDwvcmRmOkRlc2NyaXB0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",QSMY={hp:5,score:0,hits:0,second:60,useSecond:0,activeEnemy:0,playing:0,gameover:1,enemies:[],blood:[]},WIN_SIZE,CENTER_POS,g_gameLayer;cc.game.onStart=function(){cc.sys.isMobile?cc.view.setDesignResolutionSize(750,1334,cc.ResolutionPolicy.FIXED_HEIGHT):cc.view.setDesignResolutionSize(750,1334,cc.ResolutionPolicy.SHOW_ALL),cc.view.resizeWithBrowserSize(!0),WIN_SIZE=cc.director.getWinSize(),CENTER_POS=cc.p(WIN_SIZE.width/2,WIN_SIZE.height/2),LoaderScene.preload(g_resources,function(){cc.spriteFrameCache.addSpriteFrames(res.roles_plist),cc.spriteFrameCache.addSpriteFrames(res.sprite_plist),cc.director.runScene(cc.TransitionFade.create(.3,new StartScene,cc.color(36,36,36)));var t=document.getElementById("Cocos2dGameContainer"),e=document.getElementById("qrcode"),i=document.getElementById("img_qrcode");i.src="res/qr_qinol.jpg",e.removeAttribute("style"),t.appendChild(e),document.getElementById("btn_back").addEventListener(cc.sys.isMobile?"touchend":"click",function(){e.className="qrcode"},!1)},this)},cc.game.run();